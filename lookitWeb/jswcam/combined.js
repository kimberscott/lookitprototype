function call(e,t){var a,n=JSON.stringify($("form").serializeObject());return""!=n&&"check"==e&&(n='{"email":"'+$("#email").val()+'"}'),$.ajax({type:"POST",url:t,async:!1,data:{table:"users",json_data:n,"function":e},success:function(t){t?(("login"==e||"reset_pass"==e)&&($("#reg,#log,.login_form").css("display","none"),$("#reg1,#log1").css("display","block")),a=t):$("#error").css("display","block")},failure:function(){a=!1}}),a}function get_list(){return $.ajax({type:"POST",url:"./user.php",async:!1,data:{table:"users","function":"account",json_data:experiments},success:function(resp){resp?responce=eval("("+resp+")"):$("#error").css("display","block")},failure:function(){result=!1}}),responce}function get_reg_page(){return $.ajax({type:"POST",url:"./register.php",async:!1,data:session,success:function(e){e?reg_page=e:$("#error").css("display","block")},failure:function(){result=!1}}),reg_page}function register(e){e=e===void 0;var t=!1;if(t)bootbox.alert("We're still in the early stages of testing Lookit, and currently have as many users 		as we can handle!  Thanks for your interest, and please check back in a few days to see if sign-up is open again.  		In the meantime, check out our 'Resources' page for fun activities you can try at home!");else{$(".bootbox").remove(),$(".modal-backdrop").remove();var a=0,n=0,i=get_reg_page();bootbox.dialog(i,[{label:"Cancel","class":"btn-danger regis-close",callback:function(){return n||($("body").bind("showhome",function(){page.buildExperimentGallery("#experiments",experiments)}),"block"==$("#reg1").css("display")&&$("body").bind("showaccount",function(){var e=get_list();""!=e?page.buildExperimentGallery(".account",e):$("#message").html("<b>You have not participated in any studies yet.</b>")})),"block"!=$("#reg1").css("display")&&$("#reg,#log").css("display","block"),n=1,a=0,!0}},{label:"Register","class":"btn-success btn-send btn-ok",callback:function(){if($("#dob_error").css("display","none"),$("#gender_error").css("display","none"),1==a){if(1==validation_2()){var e=call("","./user.php");$("#reg1,#log1").css("display","block"),$("#reg,#log,.login_form").css("display","none"),$("#reg1").html("<a href='#'' > Hi "+e+" </a>"),n||($("body").bind("showhome",function(){page.buildExperimentGallery("#experiments",experiments)}),$("body").bind("showaccount",function(){var e=get_list();""!=e?page.buildExperimentGallery(".account",e):$("#message").html("<b>You have not participated in any studies yet.</b>")})),$(".bootbox").remove(),$(".modal-backdrop").remove(),get_params("params");var t=get_params("get_demogra");return""==t&&display_modal(),a=0,!0}var i=$(".modal-body").jScrollPane({}),r=i.data("jsp");return r.destroy(),$(".modal-body").scrollTop(0),$(".modal-body").jScrollPane(),$(".jspContainer").width($(".jspContainer").width()-31),$("#error2").html($("#error").html()),$("#error2").find("label").css({"font-weight":"700"}),!1}return!1}},{label:"Continue","class":"btn-primary btn-continue btn-ok",callback:function(){return $("#error").html(""),$("#dob_error").css("display","none"),$("#gender_error").css("display","none"),next()&&($(".btn-send").css("display","inline-block"),$(".btn-continue").css("display","none"),$(".modal-body").jScrollPane(),$(".jspContainer").width($(".jspContainer").width()-31),$(".jspPane").css({"margin-left":"0px",width:"590px"})),a=1,!1}}]),$(".bootbox").css("width","600px"),$(".btn-send").css("display","none"),$(this).keyup(function(e){13==e.keyCode&&$(".btn-ok").click()}),e||($("#registrationTitle").text("Confirm account details"),$("#regPromptText").text(""))}}function login(html,expr,obje){bootbox.dialog(html,[{label:"Cancel","class":"btn-danger login-close",callback:function(){return!0}},{label:"Login","class":"btn-primary btn-stop",callback:function(){if($("#pass_error").css("display","none"),$("#email_error").css("display","none"),$("#error").css("display","none"),$("#email").val()&&$("#password").val()){var x=call("login","./user.php"),count=x.indexOf("error");if(-1==count){var responce=eval("("+x+")");return session=responce,$("#reg1").html("<a href='#'' > Hi "+responce.name+" </a>"),obje&&($(".bootbox").remove(),$(".modal-backdrop").remove(),select_child(expr,obje)),!0}return $(".bootbox").remove(),$(".modal-backdrop").remove(),$("#reg1,#log1").css("display","none"),$("#reg,#log").css("display","block"),bootbox.alert("Error in database connection--please try again."),!1}return $("#email").val()&&""==$("#password").val()?$("#pass_error").css({display:"inline-block","margin-left":"10px","font-weight":"700"}):$("#password").val()&&""==$("#email").val()?$("#email_error").css({display:"inline-block","margin-left":"10px","font-weight":"700"}):($("#email_error").css({display:"inline-block","margin-left":"10px","font-weight":"700"}),$("#pass_error").css({display:"inline-block","margin-left":"10px","font-weight":"700"})),!1}}]),$(this).keyup(function(e){13==e.keyCode&&$(".btn-stop").click()})}function reset_pass(){$(".bootbox").remove(),$(".modal-backdrop").remove(),forgot_page=page.html("forgot_password"),bootbox.dialog(forgot_page,[{label:"Cancel","class":"btn-danger reset-close",callback:function(){return!0}},{label:"Send","class":"btn-primary btn-stop",callback:function(){$("#email_blank").css("display","none"),$("#email_error").css("display","none");var e="";if(!$("#email").val())return $("#email_blank").css("display","inline-block"),!1;var t=call("check","./user.php");return t?($.ajax({type:"POST",url:"./login.php",async:!1,data:{email:$("#email").val()},success:function(t){e=t}}),$(".bootbox").remove(),$(".modal-backdrop").remove(),bootbox.alert(e),void 0):($("#email_error").css("display","block"),!1)}}])}function save_pass(html){bootbox.dialog(html,[{label:"Cancel","class":"btn-danger",callback:function(){return!0}},{label:"Save","class":"btn-primary btn-stop",callback:function(){if(1!=validation())return $("#error").css("display","inline-block"),$("#error").find("label").css({"font-weight":"700"}),!1;var x=call("reset_pass","./user.php");return x?(x1=eval("("+x+")"),session=x1,$("#reg1").html("<a href='#'' > Hi "+x1.name+" </a>"),!0):void 0}}])}function display_modal(){html="Do you want to take the demographic survey now?",bootbox.dialog(html,[{label:"No","class":"btn-danger",callback:function(){return!0}},{label:"Yes","class":"btn-primary btn-stop",callback:function(){show_demographic()}}])}function show_demographic(){page.show("formDemographic");var e=get_params("get_demogra");console.log(e),populateForm(e)}function select_child(e,t){var a="<form id = 'child_select'><label>Please select a child:</label><select id='child_list' name = 'participant'>";if(session.child_name instanceof Array)for(var n=0;session.child.length>n;n++)a+="<option name = 'participants ' id = participant"+n+" value = "+session.child[n]+" >"+session.child_name[n]+"</option>";else a+="<option name = 'participants' id = 'participant' value = "+session.child+" disabled = 'disabled' selected> "+session.child_name+" </option>";a+="</select><input type = 'hidden' name='expriment_id' value="+e.id+" /> </br></br>",a+="</form>",a+="<p>You will select a privacy level for your recordings at the end of the study.  Unless you allow the recordings to be used, no video except for the consent video will be viewed by anyone.</p>",show_childs(a,e,t)}function show_childs(e,t,a){bootbox.dialog(e,[{label:"Cancel","class":"btn-danger",callback:function(){return!0}},{label:"Continue","class":"btn-primary btn-stop",callback:function(){var e=JSON.stringify($("form").serializeObject()),n=JSON.parse(e);session.participant=n.participant,session.expriment_id=n.expriment_id,session.participant_privacy="INCOMPLETE",check_age(e,t,a)}}]),$("input:radio[value = "+session.privacy+"]").attr("checked",!0)}function check_age(e,t,a){$.ajax({type:"POST",url:"./user.php",async:!1,data:{table:"users","function":"experiment_age",json_data:e},success:function(e){switch(e){case"11":var n=$("#child_list :selected").text()+" has already participated in this study.  Do you want to participate again anyway?";get_permission(n,t,a);break;case"00":var n=$("#child_list :selected").text()+" does not meet the target age range for this study.  Do you want to participate anyway?";get_permission(n,t,a);break;case"01":var n=$("#child_list :selected").text()+" has already participated in this study.  Do you want to participate again anyway?";get_permission(n,t,a);break;default:$(".bootbox").remove(),$(".modal-backdrop").remove(),a.loadExperiment(t,".content_pane")}},failure:function(e){console.log(e),result=!1}})}function get_permission(e,t,a){bootbox.dialog(e,[{label:"No","class":"btn-danger",callback:function(){return!0}},{label:"Yes","class":"btn-primary btn-stop",callback:function(){$(".bootbox").remove(),$(".modal-backdrop").remove(),a.loadExperiment(t,".content_pane")}}])}function set_to_session(){$.ajax({type:"POST",url:"./user.php",async:!1,data:{table:"users","function":"params",json_data:"string"},success:function(){}})}function get_params(fun){var sending,flag=1;return $.ajax({type:"POST",url:"./user.php",async:!1,data:{"function":fun},success:function(resp){if(resp){var x=eval("("+resp+")");if("get_demogra"==fun){for(var prop in x)if("_id"!=prop&&""!=x[prop]&&"Select..."!=x[prop]&&x[prop]!=session.id&&x[prop]!=session.email){flag=0;break}sending=0==flag?x:""}else session=x}else sending=""}}),sending}function show_cam(e,t){"webcamdiv"==t?(t="widget_holder",$("#"+t).wrap("<div id='widget_holder1'></div>"),$("#widget_holder1").css({width:"50%"})):($("#"+t).wrap("<div id='widget_holder1'></div>"),$("#setup_message").append($("#message")),$("#message").css({display:"block"}),$("#message").css({visibility:"visible"})),start_cam(t),$(".bootbox").css({width:"790px",height:"650px"}),$("#widget_holder1").css({height:"400px",position:"relative"}),$("#webcamdiv").height($("#widget_holder1").height()),$("#widget_holder1").offset($("#webcamdiv").offset()),$(".modal-body").css({"max-height":"550px",height:"550px"}),$(".bootbox").css("margin-top",-$(".bootbox").height()/2),$(".bootbox").css("margin-left",-$(".bootbox").width()/2),$(".btn-record").attr("disabled","disabled")}function show_cam_widget(e,t){"webcamdiv"==t&&(t="widget_holder",$("#"+t).wrap("<div id='widget_holder1'></div>"),$("#widget_holder1").css({height:"0px"}),$("#widget_holder1").css({width:"50%"}),$("#message").css({display:"none"})),start_cam(t),$("#setup_message").append($("#message")),$(".btn-record").attr("disabled","disabled")}function start_cam(e){var t="<p>To view this page ensure that Adobe Flash Player version </br>11.1.0 or greater is installed. </p></br>";t+="<a href='https://www.adobe.com/go/getflashplayer'><img src='https://www.adobe.com/images/shared/download_buttons/get_flash_player.gif' alt='Get Adobe Flash player' /></a>",$("#"+e).html(t);var a="11.1.0",n="playerProductInstall.swf",i={width:450,height:300},r={};r.quality="high",r.bgcolor="#ffffff",r.allowscriptaccess="always",r.allowfullscreen="true";var o={};o.id="flashplayer",o.name="flashplayer",o.align="middle",swfobject.embedSWF("./camera/Flashms.swf",e,"100%","100%",a,n,i,r,o),swfobject.createCSS("#"+e,"display:block;text-align:center;")}function hide_cam(e){"consent"==e&&$("#flashplayer").remove(),$("body").append($("#message")),$("#widget_holder1").css({visibility:"hidden"}),$("#message").css({visibility:"hidden"}),$("#widget_holder1").css("height","0px"),$("#widget").css("height","0px")}function show_getting_setup_widget(){$("#widget_holder1").css({height:"400px"}),$("#webcamdiv").height($("#widget_holder1").height()),$("#widget_holder1").offset($("#webcamdiv").offset()),$("#widget_holder1").css({position:"absolute",top:"200px",visibility:"visible"})}function isValidDate(e){var t=/^(\d{2})[\/](\d{2})[\/](\d{4})$/.exec(e);if(null==t)return"format";var a=t[2],n=t[1]-1,i=t[3];new Date;var r=new Date(i,n,a);return r.getDate()!=a||r.getMonth()!=n||r.getFullYear()!=i?"date":void 0}function demographic(e){var t=JSON.stringify($("form").serializeObject());$.ajax({type:"POST",url:"./user.php",async:!1,data:{table:"users",json_data:t,"function":"demogra"},success:function(t){t&&("expr"==e?advanceSegment():page.show("about"))},failure:function(){}})}function populateForm(e,t){$.each(e,function(e,a){var n=$(":input[name='"+e+"']:not(:button,:reset,:submit,:image)",t);n.val($.isArray(a)||!n.is(":checkbox")&&!n.is(":radio")?a:[a])})}function connected_mic_cam(){0==consent_recording_completed?(_connected=1,$(".btn-continue").css("display","inline-block")):void 0!=record_whole_study&&record_whole_study&&($(".modal").remove(),$("body").removeClass("modal-open"),$(".modal-backdrop").remove(),addEvent({type:"endLoading"}),document.addEventListener("keydown",getKeyCode,!1),jswcam.startRecording(),addEvent({type:"startRecording"}),consent_recording_completed=1,advanceSegment())}function done_or_withdraw(){$("#widget_holder1").attr("id","widget_holder");var e,t=page.html("privacy");bootbox.dialog(t,[{label:"Submit","class":"btn-primary reset-close",callback:function(){return $("input[name=participant_privacy]:checked").length>0?(e={"continue":"true",privacy:$("input[type='radio'][name='participant_privacy']:checked").val()},"withdraw"==$("input[type='radio'][name='participant_privacy']:checked").val()&&(e={withdraw:"true"}),send_post_data(e),show_debrief_dialog(),!0):($("#error").html("<b style='color: #FF0000'>Please select a privacy level for the experiment.</b>"),!1)}}]),setTimeout(function(){$("#flashplayer").remove(),$("#widget_holder").css("display","none")},1e3)}function show_debrief_dialog(){window.onbeforeunload=[],bootbox.dialog(generate_debriefing(),[{label:"Done","class":"btn-primary reset-close",callback:function(){$(".bootbox").modal("hide"),$("body").removeClass("modal-open"),$(".modal-backdrop").remove(),page.toggleMenu(!0),page.show("account")}}])}function send_post_data(e){$.ajax({type:"POST",url:"./camera/convert.php",async:!0,data:e,success:function(e){console.log(e)},failure:function(e){window.onbeforeunload=[],console.log(e)}}),"continue"in e&&$.ajax({type:"POST",url:"./user.php",async:!0,data:{table:"users",json_data:experiment,"function":"set_account"},success:function(){console.log("Final database update")}})}function sleep(e){for(var t=(new Date).getTime();t+e>=(new Date).getTime(););}function show_state_labs(){var e=$("#state_selector option:selected").val(),t=$("#state_selector option:selected").text(),a="<p>Sorry, we don't know of any child development labs in "+t+" yet!</p>",n={NA:"",AL:"<p><a href='http://www.ches.ua.edu/hdfs/cdrc/'target='_blank'>University of Alabama Child Development Research Center</a></p><p><a href='http://monaelsheikh.com/'target='_blank'>Auburn University Child Sleep, Health, and Development Lab</a></p>",AK:"<p><a href=''target='_blank'></a></p>",AZ:"<p><a href='http://web.arizona.edu/~tigger/'target='_blank'>University of Arizona Child Cognition Lab (Tigger Lab)</a></p><p><a href='http://web.arizona.edu/~tweety/'target='_blank'>University of Arizona Language Development Lab (Tweety Lab)</a></p><p><a href='http://nau.edu/SBS/IHD/Research/CDLL/'target='_blank'>Northern Arizona University Child Development and Language Lab</a></p>",AR:"<p><a href='http://acnc.uamsweb.com/research-2/our-laboratories-2/early-diets-and-long-term-health-lab/'target='_blank'>Arkansas Children's Nutrition Center Growth and Development Laboratory</a></p>",CA:"<p><a href='http://www-psych.stanford.edu/~babylab/'target='_blank'>Stanfordï¿½s Center for Infant Studies</a></p><p><a href='http://www-cogsci.ucsd.edu/~deak/cdlab/'target='_blank'>UCSD Cognitive Development Lab</a></p><p><a href='http://babytalk.psych.ucla.edu/home.htm'target='_blank'>UCLA Language and Cognitive Development Lab</a></p><p><a href='http://psychology.berkeley.edu/participant-recruitment/rsvp-research-subject-volunteer-pool'target='_blank'>UC Berkeley Psychology Department (list of studies)</a></p><p><a href='http://babycenter.berkeley.edu/'target='_blank'>UC Berkeley Infant Studies Center</a></p><p><a href='http://bungelab.berkeley.edu/participate/'target='_blank'>UC Berkeley Building Blocks of Cognition Lab</a></p><p><a href='http://www.cogsci.uci.edu/cogdev/information.html'target='_blank'>UC Irvine Sarnecka Cognitive Development Lab</a></p><p><a href='https://labs.psych.ucsb.edu/german/tamsin/'target='_blank'>UCSB Cognition & Development Laboratory</a></p><p><a href='http://www.csus.edu/indiv/a/alexanderk/lab.htm'target='_blank'>CSU Sacramento Cognitive Development Lab</a></p><p><a href='http://mindbrain.ucdavis.edu/labs/Rivera/'target='_blank'>UC Davis Neurocognitive Development Lab</a></p><p><a href='http://dornsife.usc.edu/labs/mid-la/participate/'target='_blank'>USC Minds in Development Lab</a></p><p><a href='http://www.ccl.ucr.edu/'target='_blank'>UC Riverside Childhood Cognition Lab</a></p>",CO:"<p><a href='http://sleep.colorado.edu/'target='_blank'>UC Boulder Sleep and Development Lab</a></p><p><a href='http://www.ucdenver.edu/academics/colleges/medicalschool/departments/psychiatry/Research/developmentalresearch/Pages/Overview.aspx'target='_blank'>University of Colorado Denver Developmental Psychiatry Research Group</a></p><p><a href='http://www.du.edu/psychology/child_health_and_development/'target='_blank'>University of Colorado Denver Child Health & Development Lab</a></p><p><a href='http://psych.colorado.edu/~cdc/whoweare.htm'target='_blank'>University of Colorado Denver Cognitive Development Center</a></p>",CT:"<p><a href='http://cogdev.research.wesleyan.edu/'target='_blank'>Wesleyan University Cognitive Development Labs</a></p><p><a href='http://cogdevlab.sites.yale.edu/'target='_blank'>Yale Cognition and Development Lab</a></p><p><a href='http://www.yale.edu/infantlab/Welcome.html'target='_blank'>Yale Infant Cognition Center</a></p><p><a href='http://www.yale.edu/minddevlab/'target='_blank'>Yale Mind and Development Lab</a></p><p><a href='http://www.yale.edu/cnl/faculty.html'target='_blank'>Yale Child Neuroscience Lab</a></p>",DE:"<p><a href='http://www.udel.edu/ILP/about/team.html'target='_blank'>University of Delaware Infant Language Project</a></p>",FL:"<p><a href='http://casgroup.fiu.edu/dcn/pages.php?id=3636'target='_blank'>FIU Developmental Cognitive Neuroscience Lab</a></p><p><a href='http://online.sfsu.edu/devpsych/fair/index.html'target='_blank'>FSU Family Interaction Research Lab</a></p><p><a href='http://psy2.fau.edu/~lewkowicz/cdlfau/default.htm'target='_blank'>FAU Child Development Lab</a></p><p><a href='http://infantlab.fiu.edu/Infant_Lab.htm'target='_blank'>FIU Infant Development Lab</a></p>",GA:"<p><a href='http://www.gcsu.edu/psychology/currentresearch.htm#Participate'target='_blank'>Georgia College Psychology Department</a></p>",HI:"<p><a href='http://www.psychology.hawaii.edu/concentrations/developmental-psychology.html'target='_blank'>University of Hawaii Developmental Psychology</a></p>",ID:"<p><a href=''target='_blank'></a></p>",IL:"<p><a href='http://internal.psychology.illinois.edu/~acimpian/'target='_blank'>University of Illinois Cognitive Development Lab</a></p><p><a href='http://internal.psychology.illinois.edu/infantlab/'target='_blank'>University of Illinois Infant Cognition Lab</a></p><p><a href='http://bradfordpillow.weebly.com/cognitive-development-lab.html'target='_blank'>Northern Illinois University Cognitive Development Lab</a></p><p><a href='http://www.communication.northwestern.edu/departments/csd/research/developmental_cognitive_neuroscience/'target='_blank'>Northwestern University Developmental Cognitive Neuroscience Lab</a></p><p><a href='http://woodwardlab.uchicago.edu/Home.html'target='_blank'>University of Chicago Infant Learning and Development Lab</a></p>",IN:"<p><a href='http://www.iub.edu/~cogdev/'target='_blank'>Indiana University Cognitive Development Lab</a></p><p><a href='http://www.psych.iupui.edu/Users/kjohnson/cogdevlab/INDEX.HTM'target='_blank'>IUPUI Cognitive Development Lab</a></p><p><a href='http://www.evansville.edu/majors/cognitivescience/language.cfm'target='_blank'>University of Evansville Language and Cognitive Development Laboratory</a></p>",IA:"<p><a href='http://www.medicine.uiowa.edu/psychiatry/cognitivebraindevelopmentlaboratory/'target='_blank'>University of Iowa Cognitive Brain Development Laboratory</a></p>",KS:"<p><a href='http://www2.ku.edu/~lsi/labs/neurocognitive_lab/staff.shtml'target='_blank'>KU Neurocognitive Development of Autism Research Laboratory</a></p><p><a href='http://healthprofessions.kumc.edu/school/research/carlson/index.html'target='_blank'>KU Maternal and Child Nutrition and Development Laboratory</a></p>",MN:"<p><a href='http://greenhoot.wordpress.com/meet-the-research-team/'target='_blank'>KU Memory and Development Lab</a></p>",KY:"<p><a href='http://www.wku.edu/psychological-sciences/labs/cognitive_development/index.php'target='_blank'>Western Kentucky University Cognitive Development Lab</a></p>",LA:"<p><a href=''target='_blank'></a></p>",ME:"<p><a href='http://people.usm.maine.edu/bthompso/Site/Development%20Lab.html'target='_blank'>USM Human Development Lab</a></p><p><a href='http://www.colby.edu/psychology/labs/cogdev1/LabAlumni.html'target='_blank'>Colby Cognitive Development Lab</a></p>",MD:"<p><a href='http://education.umd.edu/HDQM/labs/Fox/'target='_blank'>University of Maryland Child Development Lab</a></p><p><a href='http://ncdl.umd.edu/'target='_blank'>University of Maryland Neurocognitive Development Lab</a></p>",MA:"<p><a href='http://eccl.mit.edu/'target='_blank'>MIT Early Childhood Cognition Lab</a></p><p><a href='http://gablab.mit.edu/'target='_blank'>MIT Gabrieli Lab</a></p><p><a href='http://saxelab.mit.edu/people.php'target='_blank'>MIT Saxelab Social Cognitive Neuroscience Lab</a></p><p><a href='https://software.rc.fas.harvard.edu/lds/'target='_blank'>Harvard Laboratory for Developmental Sciences</a></p><p><a href='http://www.bu.edu/cdl/'target='_blank'>Boston University Child Development Labs</a></p><p><a href='babies.umb.edu'target='_blank'>UMass Boston Baby Lab</a></p><p><a href='http://people.umass.edu/lscott/lab.htm'target='_blank'>UMass Amherst Brain, Cognition, and Development Lab</a></p><p><a href='http://www.northeastern.edu/berentlab/research/infant/'target='_blank'>Northeastern Infant Phonology Lab</a></p>",MI:"<p><a href='http://www.educ.msu.edu/content/default.asp?contentID=903'target='_blank'>MSU Cognitive Development Lab</a></p><p><a href='http://ofenlab.wayne.edu/people.php'target='_blank'>Wayne State University Cognitive Brain Development Lab</a></p>",MN:"<p><a href='http://www.cehd.umn.edu/icd/research/seralab/'target='_blank'>University of Minnesota Language and Cognitive Development Lab</a></p><p><a href='http://www.cehd.umn.edu/icd/research/cdnlab/'target='_blank'>University of Minnesota Cognitive Development & Neuroimaging Lab</a></p><p><a href='http://www.cehd.umn.edu/icd/research/carlson/'target='_blank'>University of Minnesota Carlson Child Development Lab</a></p>",MS:"<p><a href=''target='_blank'></a></p>",MO:"<p><a href='http://www.artsci.wustl.edu/~children/'target='_blank'>Washington University Cognition and Development Lab</a></p><p><a href='http://mumathstudy.missouri.edu/#content'target='_blank'>University of Missouri-Columbia Math Study</a></p>",MT:"<p><a href='http://www.montana.edu/wwwpy/brooker/html/meet.html'target='_blank'>Montana State University DOME Lab</a></p>",NE:"<p><a href='http://www.boystownhospital.org/research/clinicalbehavioralstudies/Pages/LanguageDevelopmentLaboratory.aspx'target='_blank'>Boys Town National Research Hospital Language Development Laboratory</a></p><p><a href='http://research.unl.edu/dcn/'target='_blank'>University of Nebraska-Lincoln Developmental Cognitive Neuroscience Laboratory</a></p>",NV:"<p><a href='http://www.unl.edu/dbrainlab/'target='_blank'>University of Nebraska-Lincoln Developmental Brain Lab</a></p>",NH:"<p><a href='http://cola.unh.edu/news/frl'target='_blank'>University of New Hampshire Family Research Lab</a></p>",NJ:"<p><a href='http://www.shu.edu/academics/gradmeded/ms-speech-language-pathology/dlc-lab.cfm'target='_blank'>Seton Hall University  Developmental Language and Cognition Laboratory</a></p><p><a href='http://www.ramapo.edu/sshs/childlab/'target='_blank'>Ramapo College Child Development Lab</a></p><p><a href='http://ruccs.rutgers.edu/~aleslie/'target='_blank'>Rutgers University Cognitive Development Lab</a></p><p><a href='http://babylab.rutgers.edu/HOME.html'target='_blank'>Rutgers University Infancy Studies Lab</a></p><p><a href='http://ruccs.rutgers.edu/languagestudies/people.html'target='_blank'>Rutgers University Lab for Developmental Language Studies</a></p>",NM:"<p><a href=''target='_blank'></a></p>",NY:"<p><a href='http://www.columbia.edu/cu/needlab/'target='_blank'>Columbia Neurocognition, Early Experience, and Development (NEED) Lab</a></p><p><a href='https://www.facebook.com/pages/Child-Development-Lab-the-City-University-of-New-York/42978619994'target='_blank'>CUNY Child Development Lab</a></p>",NC:"<p><a href='http://people.uncw.edu/nguyens/'target='_blank'>UNCW Cognitive Development Lab</a></p>",ND:"<p><a href='http://www.cvcn.psych.ndsu.nodak.edu/labs/woods/'target='_blank'>NDSU Infant Cognitive Development Lab</a></p>",OH:"<p><a href='http://cogdev.cog.ohio-state.edu/'target='_blank'>OSU Cognitive Development Lab</a></p><p><a href='http://www.ohio.edu/chsp/rcs/csd/research/dplab.cfm'target='_blank'>Ohio University Developmental Psycholinguistics Lab</a></p>",OK:"<p><a href=''target='_blank'></a></p>",OR:"<p><a href='http://bdl.uoregon.edu/Participants/participants.php'target='_blank'>University of Oregon Brain Development Lab</a></p>",PA:"<p><a href='http://www.temple.edu/infantlab/'target='_blank'>Temple Infant & Child Lab</a></p><p><a href='http://lncd.pitt.edu/wp/'target='_blank'>University of Pittsburgh Laboratory of Neurocognitive Development</a></p><p><a href='https://sites.sas.upenn.edu/cogdevlab/'target='_blank'>UPenn Cognition & Development Lab</a></p><p><a href='http://babylab.psych.psu.edu/'target='_blank'>Penn State Brain Development Lab</a></p>",RI:"<p><a href='http://www.brown.edu/Research/dcnl/'target='_blank'>Brown University Developmental Cognitive Neuroscience Lab</a></p>",SC:"<p><a href='http://academicdepartments.musc.edu/joseph_lab/'target='_blank'>MUSC Brain, Cognition, & Development Lab</a></p>",SD:"<p><a href=''target='_blank'></a></p>",TN:"<p><a href='http://web.utk.edu/~infntlab/'target='_blank'>UT Knoxville Infant Perception-Action Lab</a></p><p><a href='http://peabody.vanderbilt.edu/departments/psych/research/research_labs/educational_cognitive_neuroscience_lab/index.php'target='_blank'>Vanderbilt Educational Cognitive Neuroscience Lab</a></p>",TX:"<p><a href='http://www.ccdlab.net/'target='_blank'>UT-Austin Culture, Cognition, & Development Lab</a></p><p><a href='http://homepage.psy.utexas.edu/HomePage/Group/EcholsLAB/'target='_blank'>UT-Austin Language Development Lab</a></p><p><a href='http://www.utexas.edu/cola/depts/psychology/areas-of-study/developmental/Labs--Affiliations/CRL.php'target='_blank'>UT-Austin Children's Research Lab</a></p><p><a href='http://www.uh.edu/class/psychology/dev-psych/research/cognitive-development/index.php'target='_blank'>University of Houston Cognitive Development Lab</a></p>",UT:"<p><a href=''target='_blank'></a></p>",VT:"<p><a href='http://www.uvm.edu/psychology/?Page=developmental_labs.html&SM=researchsubmenu.html'target='_blank'>University of Vermont Developmental Laboratories (overview)</a></p>",VA:"<p><a href='http://people.jmu.edu/vargakx/'target='_blank'>James Madison University Cognitive Development Lab</a></p><p><a href='http://www.psyc.vt.edu/labs/socialdev'target='_blank'>Virginia Tech Social Development Lab</a></p><p><a href='http://faculty.virginia.edu/childlearninglab/'target='_blank'>University of Virginia Child Language and Learning Lab</a></p><p><a href='http://denhamlab.gmu.edu/labmembers.html'target='_blank'>George Mason University Child Development Lab</a></p>",WA:"<p><a href='http://depts.washington.edu/eccl/'target='_blank'>University of Washington Early Childhood Cognition</a></p><p><a href='https://depts.washington.edu/uwkids/'target='_blank'>University of Washington Social Cognitive Development Lab</a></p><p><a href='http://ilabs.uw.edu/institute-faculty/bio/i-labs-andrew-n-meltzoff-phd'target='_blank'>University of Washington Infant and Child Studies Lab</a></p>",WV:"<p><a href='http://www.wvuadolescentlab.com/'target='_blank'>WVU Adolescent Development Lab</a></p>",WI:"<p><a href='https://sites.google.com/site/haleyvlach/'target='_blank'>University of Wisconsin Learning, Cognition, & Development Lab</a></p>"};"[Select a state...]"===t&&(t=""),$("#labs_in_state").html(n[e]),$("#state_name").text(t),0==$("#labs_in_state a")[0].text.length&&$("#labs_in_state").html(a)}function randomString(e,t){t=t||"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";for(var a="",n=0;e>n;n++){var i=Math.floor(Math.random()*t.length);a+=t.substring(i,i+1)}return a}var swfobject=function(){function e(){if(!H){try{var e=I.getElementsByTagName("body")[0].appendChild(m("span"));e.parentNode.removeChild(e)}catch(t){return}H=!0;for(var a=M.length,n=0;a>n;n++)M[n]()}}function t(e){H?e():M[M.length]=e}function a(e){if(typeof U.addEventListener!=L)U.addEventListener("load",e,!1);else if(typeof I.addEventListener!=L)I.addEventListener("load",e,!1);else if(typeof U.attachEvent!=L)b(U,"onload",e);else if("function"==typeof U.onload){var t=U.onload;U.onload=function(){t(),e()}}else U.onload=e}function n(){R?i():r()}function i(){var e=I.getElementsByTagName("body")[0],t=m(S);t.setAttribute("type",A);var a=e.appendChild(t);if(a){var n=0;(function(){if(typeof a.GetVariable!=L){var i=a.GetVariable("$version");i&&(i=i.split(" ")[1].split(","),W.pv=[parseInt(i[0],10),parseInt(i[1],10),parseInt(i[2],10)])}else if(10>n)return n++,setTimeout(arguments.callee,10),void 0;e.removeChild(t),a=null,r()})()}else r()}function r(){var e=P.length;if(e>0)for(var t=0;e>t;t++){var a=P[t].id,n=P[t].callbackFn,i={success:!1,id:a};if(W.pv[0]>0){var r=f(a);if(r)if(!v(P[t].swfVersion)||W.wk&&312>W.wk)if(P[t].expressInstall&&s()){var d={};d.data=P[t].expressInstall,d.width=r.getAttribute("width")||"0",d.height=r.getAttribute("height")||"0",r.getAttribute("class")&&(d.styleclass=r.getAttribute("class")),r.getAttribute("align")&&(d.align=r.getAttribute("align"));for(var p={},u=r.getElementsByTagName("param"),h=u.length,g=0;h>g;g++)"movie"!=u[g].getAttribute("name").toLowerCase()&&(p[u[g].getAttribute("name")]=u[g].getAttribute("value"));l(d,p,a,n)}else c(r),n&&n(i);else w(a,!0),n&&(i.success=!0,i.ref=o(a),n(i))}else if(w(a,!0),n){var m=o(a);m&&typeof m.SetVariable!=L&&(i.success=!0,i.ref=m),n(i)}}}function o(e){var t=null,a=f(e);if(a&&"OBJECT"==a.nodeName)if(typeof a.SetVariable!=L)t=a;else{var n=a.getElementsByTagName(S)[0];n&&(t=n)}return t}function s(){return!q&&v("6.0.65")&&(W.win||W.mac)&&!(W.wk&&312>W.wk)}function l(e,t,a,n){q=!0,$=n||null,x={success:!1,id:a};var i=f(a);if(i){"OBJECT"==i.nodeName?(F=d(i),k=null):(F=i,k=a),e.id=N,(typeof e.width==L||!/%$/.test(e.width)&&310>parseInt(e.width,10))&&(e.width="310"),(typeof e.height==L||!/%$/.test(e.height)&&137>parseInt(e.height,10))&&(e.height="137"),I.title=I.title.slice(0,47)+" - Flash Player Installation";var r=W.ie&&W.win?"ActiveX":"PlugIn",o="MMredirectURL="+(""+encodeURI(window.location)).replace(/&/g,"%26")+"&MMplayerType="+r+"&MMdoctitle="+I.title;if(typeof t.flashvars!=L?t.flashvars+="&"+o:t.flashvars=o,W.ie&&W.win&&4!=i.readyState){var s=m("div");a+="SWFObjectNew",s.setAttribute("id",a),i.parentNode.insertBefore(s,i),i.style.display="none",function(){4==i.readyState?i.parentNode.removeChild(i):setTimeout(arguments.callee,10)}()}p(e,t,a)}}function c(e){if(W.ie&&W.win&&4!=e.readyState){var t=m("div");e.parentNode.insertBefore(t,e),t.parentNode.replaceChild(d(e),t),e.style.display="none",function(){4==e.readyState?e.parentNode.removeChild(e):setTimeout(arguments.callee,10)
}()}else e.parentNode.replaceChild(d(e),e)}function d(e){var t=m("div");if(W.win&&W.ie)t.innerHTML=e.innerHTML;else{var a=e.getElementsByTagName(S)[0];if(a){var n=a.childNodes;if(n)for(var i=n.length,r=0;i>r;r++)1==n[r].nodeType&&"PARAM"==n[r].nodeName||8==n[r].nodeType||t.appendChild(n[r].cloneNode(!0))}}return t}function p(e,t,a){var n,i=f(a);if(W.wk&&312>W.wk)return n;if(i)if(typeof e.id==L&&(e.id=a),W.ie&&W.win){var r="";for(var o in e)e[o]!=Object.prototype[o]&&("data"==o.toLowerCase()?t.movie=e[o]:"styleclass"==o.toLowerCase()?r+=' class="'+e[o]+'"':"classid"!=o.toLowerCase()&&(r+=" "+o+'="'+e[o]+'"'));var s="";for(var l in t)t[l]!=Object.prototype[l]&&(s+='<param name="'+l+'" value="'+t[l]+'" />');i.outerHTML='<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"'+r+">"+s+"</object>",B[B.length]=e.id,n=f(e.id)}else{var c=m(S);c.setAttribute("type",A);for(var d in e)e[d]!=Object.prototype[d]&&("styleclass"==d.toLowerCase()?c.setAttribute("class",e[d]):"classid"!=d.toLowerCase()&&c.setAttribute(d,e[d]));for(var p in t)t[p]!=Object.prototype[p]&&"movie"!=p.toLowerCase()&&u(c,p,t[p]);i.parentNode.replaceChild(c,i),n=c}return n}function u(e,t,a){var n=m("param");n.setAttribute("name",t),n.setAttribute("value",a),e.appendChild(n)}function h(e){var t=f(e);t&&"OBJECT"==t.nodeName&&(W.ie&&W.win?(t.style.display="none",function(){4==t.readyState?g(e):setTimeout(arguments.callee,10)}()):t.parentNode.removeChild(t))}function g(e){var t=f(e);if(t){for(var a in t)"function"==typeof t[a]&&(t[a]=null);t.parentNode.removeChild(t)}}function f(e){var t=null;try{t=I.getElementById(e)}catch(a){}return t}function m(e){return I.createElement(e)}function b(e,t,a){e.attachEvent(t,a),z[z.length]=[e,t,a]}function v(e){var t=W.pv,a=e.split(".");return a[0]=parseInt(a[0],10),a[1]=parseInt(a[1],10)||0,a[2]=parseInt(a[2],10)||0,t[0]>a[0]||t[0]==a[0]&&t[1]>a[1]||t[0]==a[0]&&t[1]==a[1]&&t[2]>=a[2]?!0:!1}function y(e,t,a,n){if(!W.ie||!W.mac){var i=I.getElementsByTagName("head")[0];if(i){var r=a&&"string"==typeof a?a:"screen";if(n&&(C=null,D=null),!C||D!=r){var o=m("style");o.setAttribute("type","text/css"),o.setAttribute("media",r),C=i.appendChild(o),W.ie&&W.win&&typeof I.styleSheets!=L&&I.styleSheets.length>0&&(C=I.styleSheets[I.styleSheets.length-1]),D=r}W.ie&&W.win?C&&typeof C.addRule==S&&C.addRule(e,t):C&&typeof I.createTextNode!=L&&C.appendChild(I.createTextNode(e+" {"+t+"}"))}}}function w(e,t){if(V){var a=t?"visible":"hidden";H&&f(e)?f(e).style.visibility=a:y("#"+e,"visibility:"+a)}}function _(e){var t=/[\\\"<>\.;]/,a=null!=t.exec(e);return a&&typeof encodeURIComponent!=L?encodeURIComponent(e):e}var F,k,$,x,C,D,L="undefined",S="object",E="Shockwave Flash",j="ShockwaveFlash.ShockwaveFlash",A="application/x-shockwave-flash",N="SWFObjectExprInst",T="onreadystatechange",U=window,I=document,O=navigator,R=!1,M=[n],P=[],B=[],z=[],H=!1,q=!1,V=!0,W=function(){var e=typeof I.getElementById!=L&&typeof I.getElementsByTagName!=L&&typeof I.createElement!=L,t=O.userAgent.toLowerCase(),a=O.platform.toLowerCase(),n=a?/win/.test(a):/win/.test(t),i=a?/mac/.test(a):/mac/.test(t),r=/webkit/.test(t)?parseFloat(t.replace(/^.*webkit\/(\d+(\.\d+)?).*$/,"$1")):!1,o=!1,s=[0,0,0],l=null;if(typeof O.plugins!=L&&typeof O.plugins[E]==S)l=O.plugins[E].description,!l||typeof O.mimeTypes!=L&&O.mimeTypes[A]&&!O.mimeTypes[A].enabledPlugin||(R=!0,o=!1,l=l.replace(/^.*\s+(\S+\s+\S+$)/,"$1"),s[0]=parseInt(l.replace(/^(.*)\..*$/,"$1"),10),s[1]=parseInt(l.replace(/^.*\.(.*)\s.*$/,"$1"),10),s[2]=/[a-zA-Z]/.test(l)?parseInt(l.replace(/^.*[a-zA-Z]+(.*)$/,"$1"),10):0);else if(typeof U.ActiveXObject!=L)try{var c=new ActiveXObject(j);c&&(l=c.GetVariable("$version"),l&&(o=!0,l=l.split(" ")[1].split(","),s=[parseInt(l[0],10),parseInt(l[1],10),parseInt(l[2],10)]))}catch(d){}return{w3:e,pv:s,wk:r,ie:o,win:n,mac:i}}();return function(){W.w3&&((typeof I.readyState!=L&&"complete"==I.readyState||typeof I.readyState==L&&(I.getElementsByTagName("body")[0]||I.body))&&e(),H||(typeof I.addEventListener!=L&&I.addEventListener("DOMContentLoaded",e,!1),W.ie&&W.win&&(I.attachEvent(T,function(){"complete"==I.readyState&&(I.detachEvent(T,arguments.callee),e())}),U==top&&function(){if(!H){try{I.documentElement.doScroll("left")}catch(t){return setTimeout(arguments.callee,0),void 0}e()}}()),W.wk&&function(){return H?void 0:/loaded|complete/.test(I.readyState)?(e(),void 0):(setTimeout(arguments.callee,0),void 0)}(),a(e)))}(),function(){W.ie&&W.win&&window.attachEvent("onunload",function(){for(var e=z.length,t=0;e>t;t++)z[t][0].detachEvent(z[t][1],z[t][2]);for(var a=B.length,n=0;a>n;n++)h(B[n]);for(var i in W)W[i]=null;W=null;for(var r in swfobject)swfobject[r]=null;swfobject=null})}(),{registerObject:function(e,t,a,n){if(W.w3&&e&&t){var i={};i.id=e,i.swfVersion=t,i.expressInstall=a,i.callbackFn=n,P[P.length]=i,w(e,!1)}else n&&n({success:!1,id:e})},getObjectById:function(e){return W.w3?o(e):void 0},embedSWF:function(e,a,n,i,r,o,c,d,u,h){var g={success:!1,id:a};W.w3&&!(W.wk&&312>W.wk)&&e&&a&&n&&i&&r?(w(a,!1),t(function(){n+="",i+="";var t={};if(u&&typeof u===S)for(var f in u)t[f]=u[f];t.data=e,t.width=n,t.height=i;var m={};if(d&&typeof d===S)for(var b in d)m[b]=d[b];if(c&&typeof c===S)for(var y in c)typeof m.flashvars!=L?m.flashvars+="&"+y+"="+c[y]:m.flashvars=y+"="+c[y];if(v(r)){var _=p(t,m,a);t.id==a&&w(a,!0),g.success=!0,g.ref=_}else{if(o&&s())return t.data=o,l(t,m,a,h),void 0;w(a,!0)}h&&h(g)})):h&&h(g)},switchOffAutoHideShow:function(){V=!1},ua:W,getFlashPlayerVersion:function(){return{major:W.pv[0],minor:W.pv[1],release:W.pv[2]}},hasFlashPlayerVersion:v,createSWF:function(e,t,a){return W.w3?p(e,t,a):void 0},showExpressInstall:function(e,t,a,n){W.w3&&s()&&l(e,t,a,n)},removeSWF:function(e){W.w3&&h(e)},createCSS:function(e,t,a,n){W.w3&&y(e,t,a,n)},addDomLoadEvent:t,addLoadEvent:a,getQueryParamValue:function(e){var t=I.location.search||I.location.hash;if(t){if(/\?/.test(t)&&(t=t.split("?")[1]),null==e)return _(t);for(var a=t.split("&"),n=0;a.length>n;n++)if(a[n].substring(0,a[n].indexOf("="))==e)return _(a[n].substring(a[n].indexOf("=")+1))}return""},expressInstallCallback:function(){if(q){var e=f(N);e&&F&&(e.parentNode.replaceChild(F,e),k&&(w(k,!0),W.ie&&W.win&&(F.style.display="block")),$&&$(x)),q=!1}}}}();$.fn.serializeObject=function(){var e={},t=this.serializeArray();return $.each(t,function(){void 0!==e[this.name]?(e[this.name].push||(e[this.name]=[e[this.name]]),e[this.name].push(this.value||"")):e[this.name]=this.value||""}),e};var consent_recording_completed=0;$(document).ready(function(){if($("#log1").click(function(){$.ajax({url:"login.php",type:"post",data:{sure:"1"},success:function(){$("#reg1,#log1,.login_form").css("display","none"),$("#reg,#log").css("display","block"),page.show("about")}})}),$("#log").click(function(){var e=new XMLHttpRequest;e.open("POST","./login/login.html",!1),e.send(null);var t=e.responseText;login(t,"","")}),$("#reset").val()){var e=$("#reset").val(),t=new XMLHttpRequest;t.open("POST","./login/reset.php?email="+e,!1),t.send(null);var a=t.responseText;save_pass(a)}$("#reg").click(function(){register()}),$("#reg1").click(function(){page.show("account")}),$("#demo a").click(function(){page.show("account")}),$("body").bind("showaccount",function(){var e=get_list();""!=e?page.buildExperimentGallery("#experi",e):$("#message").html("<b>You have not participated in any studies.</b>")}),get_params("params"),$(".bootbox").css("margin-top",-$(".bootbox").height()/2),$(".bootbox").css("margin-left",-$(".bootbox").width()/2)});var responce,reg_page,session;_connected=0,function(e){e.extend(e.fn,{validate:function(t){if(!this.length)return t&&t.debug&&window.console&&console.warn("Nothing selected, can't validate, returning nothing."),void 0;var a=e.data(this[0],"validator");return a?a:(this.attr("novalidate","novalidate"),a=new e.validator(t,this[0]),e.data(this[0],"validator",a),a.settings.onsubmit&&(this.validateDelegate(":submit","click",function(t){a.settings.submitHandler&&(a.submitButton=t.target),e(t.target).hasClass("cancel")&&(a.cancelSubmit=!0),void 0!==e(t.target).attr("formnovalidate")&&(a.cancelSubmit=!0)}),this.submit(function(t){function n(){var n;return a.settings.submitHandler?(a.submitButton&&(n=e("<input type='hidden'/>").attr("name",a.submitButton.name).val(e(a.submitButton).val()).appendTo(a.currentForm)),a.settings.submitHandler.call(a,a.currentForm,t),a.submitButton&&n.remove(),!1):!0}return a.settings.debug&&t.preventDefault(),a.cancelSubmit?(a.cancelSubmit=!1,n()):a.form()?a.pendingRequest?(a.formSubmitted=!0,!1):n():(a.focusInvalid(),!1)})),a)},valid:function(){if(e(this[0]).is("form"))return this.validate().form();var t=!0,a=e(this[0].form).validate();return this.each(function(){t=t&&a.element(this)}),t},removeAttrs:function(t){var a={},n=this;return e.each(t.split(/\s/),function(e,t){a[t]=n.attr(t),n.removeAttr(t)}),a},rules:function(t,a){var n=this[0];if(t){var i=e.data(n.form,"validator").settings,r=i.rules,o=e.validator.staticRules(n);switch(t){case"add":e.extend(o,e.validator.normalizeRule(a)),delete o.messages,r[n.name]=o,a.messages&&(i.messages[n.name]=e.extend(i.messages[n.name],a.messages));break;case"remove":if(!a)return delete r[n.name],o;var s={};return e.each(a.split(/\s/),function(e,t){s[t]=o[t],delete o[t]}),s}}var l=e.validator.normalizeRules(e.extend({},e.validator.classRules(n),e.validator.attributeRules(n),e.validator.dataRules(n),e.validator.staticRules(n)),n);if(l.required){var c=l.required;delete l.required,l=e.extend({required:c},l)}return l}}),e.extend(e.expr[":"],{blank:function(t){return!e.trim(""+e(t).val())},filled:function(t){return!!e.trim(""+e(t).val())},unchecked:function(t){return!e(t).prop("checked")}}),e.validator=function(t,a){this.settings=e.extend(!0,{},e.validator.defaults,t),this.currentForm=a,this.init()},e.validator.format=function(t,a){return 1===arguments.length?function(){var a=e.makeArray(arguments);return a.unshift(t),e.validator.format.apply(this,a)}:(arguments.length>2&&a.constructor!==Array&&(a=e.makeArray(arguments).slice(1)),a.constructor!==Array&&(a=[a]),e.each(a,function(e,a){t=t.replace(RegExp("\\{"+e+"\\}","g"),function(){return a})}),t)},e.extend(e.validator,{defaults:{messages:{},groups:{},rules:{},errorClass:"error",validClass:"valid",errorElement:"label",focusInvalid:!0,errorContainer:e([]),errorLabelContainer:e([]),onsubmit:!0,ignore:":hidden",ignoreTitle:!1,onfocusin:function(e){this.lastActive=e,this.settings.focusCleanup&&!this.blockFocusCleanup&&(this.settings.unhighlight&&this.settings.unhighlight.call(this,e,this.settings.errorClass,this.settings.validClass),this.addWrapper(this.errorsFor(e)).hide())},onfocusout:function(e){this.checkable(e)||!(e.name in this.submitted)&&this.optional(e)||this.element(e)},onkeyup:function(e,t){(9!==t.which||""!==this.elementValue(e))&&(e.name in this.submitted||e===this.lastElement)&&this.element(e)},onclick:function(e){e.name in this.submitted?this.element(e):e.parentNode.name in this.submitted&&this.element(e.parentNode)},highlight:function(t,a,n){"radio"===t.type?this.findByName(t.name).addClass(a).removeClass(n):e(t).addClass(a).removeClass(n)},unhighlight:function(t,a,n){"radio"===t.type?this.findByName(t.name).removeClass(a).addClass(n):e(t).removeClass(a).addClass(n)}},setDefaults:function(t){e.extend(e.validator.defaults,t)},messages:{required:"This field is required.",remote:"Please fix this field.",email:"Please enter a valid email address.",url:"Please enter a valid URL.",date:"Please enter a valid date.",dateISO:"Please enter a valid date (ISO).",number:"Please enter a valid number.",digits:"Please enter only digits.",creditcard:"Please enter a valid credit card number.",equalTo:"Please enter the same value again.",maxlength:e.validator.format("Please enter no more than {0} characters."),minlength:e.validator.format("Please enter at least {0} characters."),rangelength:e.validator.format("Please enter a value between {0} and {1} characters long."),range:e.validator.format("Please enter a value between {0} and {1}."),max:e.validator.format("Please enter a value less than or equal to {0}."),min:e.validator.format("Please enter a value greater than or equal to {0}.")},autoCreateRanges:!1,prototype:{init:function(){function t(t){var a=e.data(this[0].form,"validator"),n="on"+t.type.replace(/^validate/,"");a.settings[n]&&a.settings[n].call(a,this[0],t)}this.labelContainer=e(this.settings.errorLabelContainer),this.errorContext=this.labelContainer.length&&this.labelContainer||e(this.currentForm),this.containers=e(this.settings.errorContainer).add(this.settings.errorLabelContainer),this.submitted={},this.valueCache={},this.pendingRequest=0,this.pending={},this.invalid={},this.reset();var a=this.groups={};e.each(this.settings.groups,function(t,n){"string"==typeof n&&(n=n.split(/\s/)),e.each(n,function(e,n){a[n]=t})});var n=this.settings.rules;e.each(n,function(t,a){n[t]=e.validator.normalizeRule(a)}),e(this.currentForm).validateDelegate(":text, [type='password'], [type='file'], select, textarea, [type='number'], [type='search'] ,[type='tel'], [type='url'], [type='email'], [type='datetime'], [type='date'], [type='month'], [type='week'], [type='time'], [type='datetime-local'], [type='range'], [type='color'] ","focusin focusout keyup",t).validateDelegate("[type='radio'], [type='checkbox'], select, option","click",t),this.settings.invalidHandler&&e(this.currentForm).bind("invalid-form.validate",this.settings.invalidHandler)},form:function(){return this.checkForm(),e.extend(this.submitted,this.errorMap),this.invalid=e.extend({},this.errorMap),this.valid()||e(this.currentForm).triggerHandler("invalid-form",[this]),this.showErrors(),this.valid()},checkForm:function(){this.prepareForm();for(var e=0,t=this.currentElements=this.elements();t[e];e++)this.check(t[e]);return this.valid()},element:function(t){t=this.validationTargetFor(this.clean(t)),this.lastElement=t,this.prepareElement(t),this.currentElements=e(t);var a=this.check(t)!==!1;return a?delete this.invalid[t.name]:this.invalid[t.name]=!0,this.numberOfInvalids()||(this.toHide=this.toHide.add(this.containers)),this.showErrors(),a},showErrors:function(t){if(t){e.extend(this.errorMap,t),this.errorList=[];for(var a in t)this.errorList.push({message:t[a],element:this.findByName(a)[0]});this.successList=e.grep(this.successList,function(e){return!(e.name in t)})}this.settings.showErrors?this.settings.showErrors.call(this,this.errorMap,this.errorList):this.defaultShowErrors()},resetForm:function(){e.fn.resetForm&&e(this.currentForm).resetForm(),this.submitted={},this.lastElement=null,this.prepareForm(),this.hideErrors(),this.elements().removeClass(this.settings.errorClass).removeData("previousValue")},numberOfInvalids:function(){return this.objectLength(this.invalid)},objectLength:function(e){var t=0;for(var a in e)t++;return t},hideErrors:function(){this.addWrapper(this.toHide).hide()},valid:function(){return 0===this.size()},size:function(){return this.errorList.length},focusInvalid:function(){if(this.settings.focusInvalid)try{e(this.findLastActive()||this.errorList.length&&this.errorList[0].element||[]).filter(":visible").focus().trigger("focusin")}catch(t){}},findLastActive:function(){var t=this.lastActive;return t&&1===e.grep(this.errorList,function(e){return e.element.name===t.name}).length&&t},elements:function(){var t=this,a={};return e(this.currentForm).find("input, select, textarea").not(":submit, :reset, :image, [disabled]").not(this.settings.ignore).filter(function(){return!this.name&&t.settings.debug&&window.console&&console.error("%o has no name assigned",this),this.name in a||!t.objectLength(e(this).rules())?!1:(a[this.name]=!0,!0)})},clean:function(t){return e(t)[0]},errors:function(){var t=this.settings.errorClass.replace(" ",".");return e(this.settings.errorElement+"."+t,this.errorContext)},reset:function(){this.successList=[],this.errorList=[],this.errorMap={},this.toShow=e([]),this.toHide=e([]),this.currentElements=e([])},prepareForm:function(){this.reset(),this.toHide=this.errors().add(this.containers)},prepareElement:function(e){this.reset(),this.toHide=this.errorsFor(e)},elementValue:function(t){var a=e(t).attr("type"),n=e(t).val();return"radio"===a||"checkbox"===a?e("input[name='"+e(t).attr("name")+"']:checked").val():"string"==typeof n?n.replace(/\r/g,""):n},check:function(t){t=this.validationTargetFor(this.clean(t));var a,n=e(t).rules(),i=!1,r=this.elementValue(t);for(var o in n){var s={method:o,parameters:n[o]};try{if(a=e.validator.methods[o].call(this,r,t,s.parameters),"dependency-mismatch"===a){i=!0;continue}if(i=!1,"pending"===a)return this.toHide=this.toHide.not(this.errorsFor(t)),void 0;if(!a)return this.formatAndAdd(t,s),!1}catch(l){throw this.settings.debug&&window.console&&console.log("Exception occurred when checking element "+t.id+", check the '"+s.method+"' method.",l),l}}return i?void 0:(this.objectLength(n)&&this.successList.push(t),!0)},customDataMessage:function(t,a){return e(t).data("msg-"+a.toLowerCase())||t.attributes&&e(t).attr("data-msg-"+a.toLowerCase())},customMessage:function(e,t){var a=this.settings.messages[e];return a&&(a.constructor===String?a:a[t])},findDefined:function(){for(var e=0;arguments.length>e;e++)if(void 0!==arguments[e])return arguments[e];return void 0},defaultMessage:function(t,a){return this.findDefined(this.customMessage(t.name,a),this.customDataMessage(t,a),!this.settings.ignoreTitle&&t.title||void 0,e.validator.messages[a],"<strong>Warning: No message defined for "+t.name+"</strong>")},formatAndAdd:function(t,a){var n=this.defaultMessage(t,a.method),i=/\$?\{(\d+)\}/g;"function"==typeof n?n=n.call(this,a.parameters,t):i.test(n)&&(n=e.validator.format(n.replace(i,"{$1}"),a.parameters)),this.errorList.push({message:n,element:t}),this.errorMap[t.name]=n,this.submitted[t.name]=n},addWrapper:function(e){return this.settings.wrapper&&(e=e.add(e.parent(this.settings.wrapper))),e},defaultShowErrors:function(){var e,t;for(e=0;this.errorList[e];e++){var a=this.errorList[e];this.settings.highlight&&this.settings.highlight.call(this,a.element,this.settings.errorClass,this.settings.validClass),this.showLabel(a.element,a.message)}if(this.errorList.length&&(this.toShow=this.toShow.add(this.containers)),this.settings.success)for(e=0;this.successList[e];e++)this.showLabel(this.successList[e]);if(this.settings.unhighlight)for(e=0,t=this.validElements();t[e];e++)this.settings.unhighlight.call(this,t[e],this.settings.errorClass,this.settings.validClass);this.toHide=this.toHide.not(this.toShow),this.hideErrors(),this.addWrapper(this.toShow).show()},validElements:function(){return this.currentElements.not(this.invalidElements())},invalidElements:function(){return e(this.errorList).map(function(){return this.element})},showLabel:function(t,a){var n=this.errorsFor(t);n.length?(n.removeClass(this.settings.validClass).addClass(this.settings.errorClass),n.html(a)):(n=e("<"+this.settings.errorElement+">").attr("for",this.idOrName(t)).addClass(this.settings.errorClass).html(a||""),this.settings.wrapper&&(n=n.hide().show().wrap("<"+this.settings.wrapper+"/>").parent()),this.labelContainer.append(n).length||(this.settings.errorPlacement?this.settings.errorPlacement(n,e(t)):n.insertAfter(t))),!a&&this.settings.success&&(n.text(""),"string"==typeof this.settings.success?n.addClass(this.settings.success):this.settings.success(n,t)),this.toShow=this.toShow.add(n)},errorsFor:function(t){var a=this.idOrName(t);return this.errors().filter(function(){return e(this).attr("for")===a})},idOrName:function(e){return this.groups[e.name]||(this.checkable(e)?e.name:e.id||e.name)},validationTargetFor:function(e){return this.checkable(e)&&(e=this.findByName(e.name).not(this.settings.ignore)[0]),e},checkable:function(e){return/radio|checkbox/i.test(e.type)},findByName:function(t){return e(this.currentForm).find("[name='"+t+"']")},getLength:function(t,a){switch(a.nodeName.toLowerCase()){case"select":return e("option:selected",a).length;case"input":if(this.checkable(a))return this.findByName(a.name).filter(":checked").length}return t.length},depend:function(e,t){return this.dependTypes[typeof e]?this.dependTypes[typeof e](e,t):!0},dependTypes:{"boolean":function(e){return e},string:function(t,a){return!!e(t,a.form).length},"function":function(e,t){return e(t)}},optional:function(t){var a=this.elementValue(t);return!e.validator.methods.required.call(this,a,t)&&"dependency-mismatch"},startRequest:function(e){this.pending[e.name]||(this.pendingRequest++,this.pending[e.name]=!0)},stopRequest:function(t,a){this.pendingRequest--,0>this.pendingRequest&&(this.pendingRequest=0),delete this.pending[t.name],a&&0===this.pendingRequest&&this.formSubmitted&&this.form()?(e(this.currentForm).submit(),this.formSubmitted=!1):!a&&0===this.pendingRequest&&this.formSubmitted&&(e(this.currentForm).triggerHandler("invalid-form",[this]),this.formSubmitted=!1)},previousValue:function(t){return e.data(t,"previousValue")||e.data(t,"previousValue",{old:null,valid:!0,message:this.defaultMessage(t,"remote")})}},classRuleSettings:{required:{required:!0},email:{email:!0},url:{url:!0},date:{date:!0},dateISO:{dateISO:!0},number:{number:!0},digits:{digits:!0},creditcard:{creditcard:!0}},addClassRules:function(t,a){t.constructor===String?this.classRuleSettings[t]=a:e.extend(this.classRuleSettings,t)},classRules:function(t){var a={},n=e(t).attr("class");return n&&e.each(n.split(" "),function(){this in e.validator.classRuleSettings&&e.extend(a,e.validator.classRuleSettings[this])}),a},attributeRules:function(t){var a={},n=e(t),i=n[0].getAttribute("type");for(var r in e.validator.methods){var o;"required"===r?(o=n.get(0).getAttribute(r),""===o&&(o=!0),o=!!o):o=n.attr(r),/min|max/.test(r)&&(null===i||/number|range|text/.test(i))&&(o=Number(o)),o?a[r]=o:i===r&&"range"!==i&&(a[r]=!0)}return a.maxlength&&/-1|2147483647|524288/.test(a.maxlength)&&delete a.maxlength,a},dataRules:function(t){var a,n,i={},r=e(t);for(a in e.validator.methods)n=r.data("rule-"+a.toLowerCase()),void 0!==n&&(i[a]=n);return i},staticRules:function(t){var a={},n=e.data(t.form,"validator");return n.settings.rules&&(a=e.validator.normalizeRule(n.settings.rules[t.name])||{}),a},normalizeRules:function(t,a){return e.each(t,function(n,i){if(i===!1)return delete t[n],void 0;if(i.param||i.depends){var r=!0;switch(typeof i.depends){case"string":r=!!e(i.depends,a.form).length;break;case"function":r=i.depends.call(a,a)}r?t[n]=void 0!==i.param?i.param:!0:delete t[n]}}),e.each(t,function(n,i){t[n]=e.isFunction(i)?i(a):i}),e.each(["minlength","maxlength"],function(){t[this]&&(t[this]=Number(t[this]))}),e.each(["rangelength","range"],function(){var a;t[this]&&(e.isArray(t[this])?t[this]=[Number(t[this][0]),Number(t[this][1])]:"string"==typeof t[this]&&(a=t[this].split(/[\s,]+/),t[this]=[Number(a[0]),Number(a[1])]))}),e.validator.autoCreateRanges&&(t.min&&t.max&&(t.range=[t.min,t.max],delete t.min,delete t.max),t.minlength&&t.maxlength&&(t.rangelength=[t.minlength,t.maxlength],delete t.minlength,delete t.maxlength)),t},normalizeRule:function(t){if("string"==typeof t){var a={};e.each(t.split(/\s/),function(){a[this]=!0}),t=a}return t},addMethod:function(t,a,n){e.validator.methods[t]=a,e.validator.messages[t]=void 0!==n?n:e.validator.messages[t],3>a.length&&e.validator.addClassRules(t,e.validator.normalizeRule(t))},methods:{required:function(t,a,n){if(!this.depend(n,a))return"dependency-mismatch";if("select"===a.nodeName.toLowerCase()){var i=e(a).val();return i&&i.length>0}return this.checkable(a)?this.getLength(t,a)>0:e.trim(t).length>0},email:function(e,t){return this.optional(t)||/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))$/i.test(e)},url:function(e,t){return this.optional(t)||/^(https?|s?ftp):\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i.test(e)},date:function(e,t){return this.optional(t)||!/Invalid|NaN/.test(""+new Date(e))},dateISO:function(e,t){return this.optional(t)||/^\d{4}[\/\-]\d{1,2}[\/\-]\d{1,2}$/.test(e)},number:function(e,t){return this.optional(t)||/^-?(?:\d+|\d{1,3}(?:,\d{3})+)?(?:\.\d+)?$/.test(e)},digits:function(e,t){return this.optional(t)||/^\d+$/.test(e)},creditcard:function(e,t){if(this.optional(t))return"dependency-mismatch";if(/[^0-9 \-]+/.test(e))return!1;var a=0,n=0,i=!1;e=e.replace(/\D/g,"");for(var r=e.length-1;r>=0;r--){var o=e.charAt(r);n=parseInt(o,10),i&&(n*=2)>9&&(n-=9),a+=n,i=!i}return 0===a%10},minlength:function(t,a,n){var i=e.isArray(t)?t.length:this.getLength(e.trim(t),a);return this.optional(a)||i>=n},maxlength:function(t,a,n){var i=e.isArray(t)?t.length:this.getLength(e.trim(t),a);return this.optional(a)||n>=i},rangelength:function(t,a,n){var i=e.isArray(t)?t.length:this.getLength(e.trim(t),a);return this.optional(a)||i>=n[0]&&n[1]>=i},min:function(e,t,a){return this.optional(t)||e>=a},max:function(e,t,a){return this.optional(t)||a>=e},range:function(e,t,a){return this.optional(t)||e>=a[0]&&a[1]>=e},equalTo:function(t,a,n){var i=e(n);return this.settings.onfocusout&&i.unbind(".validate-equalTo").bind("blur.validate-equalTo",function(){e(a).valid()}),t===i.val()},remote:function(t,a,n){if(this.optional(a))return"dependency-mismatch";var i=this.previousValue(a);if(this.settings.messages[a.name]||(this.settings.messages[a.name]={}),i.originalMessage=this.settings.messages[a.name].remote,this.settings.messages[a.name].remote=i.message,n="string"==typeof n&&{url:n}||n,i.old===t)return i.valid;i.old=t;var r=this;this.startRequest(a);var o={};return o[a.name]=t,e.ajax(e.extend(!0,{url:n,mode:"abort",port:"validate"+a.name,dataType:"json",data:o,success:function(n){r.settings.messages[a.name].remote=i.originalMessage;var o=n===!0||"true"===n;if(o){var s=r.formSubmitted;r.prepareElement(a),r.formSubmitted=s,r.successList.push(a),delete r.invalid[a.name],r.showErrors()}else{var l={},c=n||r.defaultMessage(a,"remote");l[a.name]=i.message=e.isFunction(c)?c(t):c,r.invalid[a.name]=!0,r.showErrors(l)}i.valid=o,r.stopRequest(a,o)}},n)),"pending"}}}),e.format=e.validator.format}(jQuery),function(e){var t={};if(e.ajaxPrefilter)e.ajaxPrefilter(function(e,a,n){var i=e.port;"abort"===e.mode&&(t[i]&&t[i].abort(),t[i]=n)});else{var a=e.ajax;e.ajax=function(n){var i=("mode"in n?n:e.ajaxSettings).mode,r=("port"in n?n:e.ajaxSettings).port;return"abort"===i?(t[r]&&t[r].abort(),t[r]=a.apply(this,arguments),t[r]):a.apply(this,arguments)}}}(jQuery),function(e){e.extend(e.fn,{validateDelegate:function(t,a,n){return this.bind(a,function(a){var i=e(a.target);return i.is(t)?n.apply(i,arguments):void 0})}})}(jQuery),"object"!=typeof JSON&&(JSON={}),function(){"use strict";function f(e){return 10>e?"0"+e:e}function quote(e){return escapable.lastIndex=0,escapable.test(e)?'"'+e.replace(escapable,function(e){var t=meta[e];return"string"==typeof t?t:"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+e+'"'}function str(e,t){var a,n,i,r,o,s=gap,l=t[e];switch(l&&"object"==typeof l&&"function"==typeof l.toJSON&&(l=l.toJSON(e)),"function"==typeof rep&&(l=rep.call(t,e,l)),typeof l){case"string":return quote(l);case"number":return isFinite(l)?l+"":"null";case"boolean":case"null":return l+"";case"object":if(!l)return"null";if(gap+=indent,o=[],"[object Array]"===Object.prototype.toString.apply(l)){for(r=l.length,a=0;r>a;a+=1)o[a]=str(a,l)||"null";return i=0===o.length?"[]":gap?"[\n"+gap+o.join(",\n"+gap)+"\n"+s+"]":"["+o.join(",")+"]",gap=s,i}if(rep&&"object"==typeof rep)for(r=rep.length,a=0;r>a;a+=1)"string"==typeof rep[a]&&(n=rep[a],i=str(n,l),i&&o.push(quote(n)+(gap?": ":":")+i));else for(n in l)Object.prototype.hasOwnProperty.call(l,n)&&(i=str(n,l),i&&o.push(quote(n)+(gap?": ":":")+i));return i=0===o.length?"{}":gap?"{\n"+gap+o.join(",\n"+gap)+"\n"+s+"}":"{"+o.join(",")+"}",gap=s,i}}"function"!=typeof Date.prototype.toJSON&&(Date.prototype.toJSON=function(){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(){return this.valueOf()});var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;"function"!=typeof JSON.stringify&&(JSON.stringify=function(e,t,a){var n;if(gap="",indent="","number"==typeof a)for(n=0;a>n;n+=1)indent+=" ";else"string"==typeof a&&(indent=a);if(rep=t,t&&"function"!=typeof t&&("object"!=typeof t||"number"!=typeof t.length))throw Error("JSON.stringify");return str("",{"":e})}),"function"!=typeof JSON.parse&&(JSON.parse=function(text,reviver){function walk(e,t){var a,n,i=e[t];if(i&&"object"==typeof i)for(a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n=walk(i,a),void 0!==n?i[a]=n:delete i[a]);return reviver.call(e,t,i)}var j;if(text+="",cx.lastIndex=0,cx.test(text)&&(text=text.replace(cx,function(e){return"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})),/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return j=eval("("+text+")"),"function"==typeof reviver?walk({"":j},""):j;throw new SyntaxError("JSON.parse")})}();var RECORDINGSET="";$.isFunction(Function.prototype.createDelegate)||(Function.prototype.createDelegate=function(e){var t=this;return function(){t.apply(e,arguments)}}),$.isFunction(String.prototype.hashCode)||(String.prototype.hashCode=function(){var e=0;if(0==this.length)return e;for(i=0;this.length>i;i++)char=this.charCodeAt(i),e=(e<<5)-e+char,e&=e;return e}),function(){$(document).ready(function(){$("body").bind("showhome",function(){page.buildExperimentGallery("#experiments",experiments)}),$(".loginDiv").hide(),$(".login_hide").show(300),window.location.hash&&page.show(window.location.hash.substring(1))
})}();var recording_count="0",page=function(){function e(){this.fragments={}}default_config={jq_selector:"#jswcam",app_width:200,app_height:200,basepath:"/webcam/",codebase:"java/",archive:"webcam-0.1.jar",libpath:"lib/",uploadpath:"upload.php",rec_width:320,rec_height:240,dll_archive_64:"windows-x86_64.jar",dll_archive_32:"windows-x86_64.jar",so_archive_64:"linux-x86_64.jar",so_archive_32:"linux-x86_64.jar",dylib_archive_64:"osx-x86_64.jar"},e.prototype.init=function(e){this.config=$.extend({},default_config,e)},e.prototype.showVerbalConsentDialog=function(e,t){var a,n,i=this.html(t.id),r=0,o=0;RECORDINGSET=randomString(3);var s=0,l="<div id = 'top_bar'><p><h1 style='text-align:center'>Test Your Webcam and Microphone </h1></p></div><div id='cam_setup'></div><div id = 'setup_message'></div>";bootbox.dialog(l,[{label:"Cancel","class":"btn-danger",callback:function(){return 1==r&&(jswcam.stopRecording(),window.clearTimeout(s),$("#recording-indicator").css({"background-color":"#666666"}),r=0),$("#widget_holder").css("display","none"),hide_cam(),!0}},{label:"Send video (0 seconds)","class":"btn-success btn-send",callback:function(){return 1==o?(get_params("params"),$.post("./camera/convert.php",{"continue":"true",privacy:"INCOMPLETE"}),console.log(session),consent_recording_completed=1,o=0,r=0,hide_cam("consent"),e(),!0):!1}},{label:"Done","class":"btn-primary btn-stop",callback:function(){if(2==r){window.clearTimeout(s);var e=(new Date).getTime();return n=(e-a)/1e3,a=null,r=0,o=1,$(".btn-record").attr("disabled","disabled"),$(".btn-stop").attr("disabled","disabled"),$("#recording-indicator").css({"background-color":"#666666"}),$(".btn-send").attr("disabled",!1),jswcam.stopRecording(),$(".btn-send").html("Send video ("+parseInt(n)+" seconds)"),!1}return!1}},{label:"Record","class":"btn-primary btn-record",callback:function(){return $(".btn-record").attr("disabled")?!1:(0==r&&0==o&&(r=1,o=0,$(".btn-send").attr("disabled","disabled"),$(".btn-record").attr("disabled","disabled"),$("#recording-indicator").css({"background-color":"#FF0000"}),s=window.setTimeout(function(){return window.clearTimeout(s),r=2,$(".btn-stop").attr("disabled",!1),!1},5e3),recording_count="0",jswcam.startRecording(""),a=(new Date).getTime()),!1)}},{label:"Continue","class":"btn-primary btn-continue",callback:function(){return swfobject.getObjectById("flashplayer").consent(),$("#top_bar").html(i),$("#top_bar").append(page.html("consent_verbal")),$("#message").css({visibility:"hidden"}),$(".btn-send").css("display","inline-block"),$(".btn-stop").css("display","inline-block"),$(".btn-record").css("display","inline-block"),$("#widget_holder1").append('<div style="position: absolute; z-index: 10000; width: 750px; margin-top: -400px; height: 400px; "></div>'),$(".modal-body").scroll(function(){$(".modal-body").scrollTop()+$(".modal-body").height()>$("#top_bar").height()+$("#widget_holder1").height()&&$(".btn-record").attr("disabled",!1)}),$(".btn-continue").css("display","none"),!1}}]),$(".btn-continue").css("display","none"),$(".btn-send").attr("disabled","disabled"),$(".btn-stop").attr("disabled","disabled"),$(".btn-send").css("display","none"),$(".btn-stop").css("display","none"),$(".btn-record").css("display","none"),$(".btn-record").attr("disabled","disabled"),consent_recording_completed=0,show_cam("consent","cam_setup")},e.prototype.showVerifyDialog=function(e){var t=this.html("upload");bootbox.confirm(t,function(t){t?e():(jswcam.toggleWebCamView(!0),page.show("home"))})},e.prototype.isMenuCollapsed=function(){return!$("#menu-container").is(":visible")},e.prototype.toggleMenu=function(e){if(e===void 0)var e=this.isMenuCollapsed();e?($("#menu-container").css("position",""),$("#menu-container").css("left",""),$("#menu-container").css("top",""),$("#menu").css("position",""),$("#menu").css("margin-top",""),$("#topbar").css("position",""),$("#topbar").css("margin-top",""),$("#page-container").addClass("skip-fixed-sidebar")):($("#menu-container").css("position","absolute"),$("#menu-container").css("left","-500px"),$("#menu-container").css("top","0px"),$("#menu").css("position","absolute"),$("#menu").css("margin-top","-100px"),$("#topbar").css("position","absolute"),$("#topbar").css("margin-top","-100px"),$("#page-container").removeClass("skip-fixed-sidebar"))},e.prototype.clear=function(e){this._removeTempFiles(),e=e||".content_pane",$(e).children().remove().end()},e.prototype.show=function(e){$(".active").removeClass("active"),$("."+e).addClass("active"),this.clear(".content_pane"),$(".content_pane").html(this.html(e)),$("body").trigger("show"+e);var t;t=$.browser.safari?$("body"):$("html,body"),t.scrollTop(0),"home"==e&&(window.onbeforeunload=[])},e.prototype.html=function(e,t){return e?(t&&(this.fragments[e]=t),e in this.fragments?this.fragments[e]:null):null},e.prototype._getTempFiles=function(e){return $.isArray(e)&&(this.list=e),this.list||(this.list=[]),this.list},e.prototype._removeTempFiles=function(){function e(e){var t=$('script[src="'+e+'"]');return t?(t.remove(),void 0):!1}function t(e){var t=$('link[href="'+e+'"]');return t?(t.remove(),void 0):!1}var a=this._getTempFiles();for(var n in a)if(a.hasOwnProperty(n)){var i=a[n];e(i),t(i)}this._getTempFiles([])},e.prototype._replaceExperiment=function(e,t,a){this.clear();var n=0;for(var i in t)if(t.hasOwnProperty(i)){n+=1;var r=t[i],o=document.createElement("script");o.type="text/javascript",o.src=r,function(t){var a=function(){n-=1,t.onload=null,0==n&&e()};t.onload=a}(o),document.getElementsByTagName("head")[0].appendChild(o)}a=a||[];for(link in a)if(a.hasOwnProperty(link)){var r=a[link];$("head").append($("<link/>",{rel:"stylesheet",type:"text/css",href:r}))}var s=[];Array.prototype.push.apply(s,t),Array.prototype.push.apply(s,a),this._getTempFiles(s)},e.prototype.loadExperiment=function(e,t){function a(){var a=function(t){return e.path+t};t=t||".content_pane";var n=$.map(e.scripts,a),i=[];"css"in e&&$.isArray(e.css)&&(i=$.map(e.css,a));var r=function(){main(t,e)};this._replaceExperiment(r,n,i)}try{console.log(e),"undefined"==typeof userId&&(userId="test_user")}catch(n){console.log(n)}var i=a.createDelegate(this);this.showVerbalConsentDialog(i,e)},e.prototype.buildExperimentGallery=function(e,t){var a=3,n=3,r=n*a,o=0,s=$("<a/>",{"class":"btn pull-right btn-success",text:"Next",href:"#"}),l=$("<a/>",{"class":"btn pull-left btn-success",text:"Prev",href:"#"}),c=function(){for(console.log(o),i=0;n>i;i++){var d=$("<div/>",{"class":["row-fluid"]});for(j=0;a>j&&!(o+i*a+j>=t.length);j++)(function(e){var t=$("<div/>",{"class":"span"+12/a+" expr_block"}),n=$("<a><h2>"+e.name+"</h2>");t.append(n);var i=$("<img/>",{src:e.img,alt:"Could not load image"});t.append(n),t.append(i),t.append(e.desc),t.append("</a>"),t.click(function(){if("none"==$("#reg1").css("display")){var t=new XMLHttpRequest;t.open("POST","./login/login.html",!1),t.send(null),login_page=t.responseText,login_page+='<div id = "force_login"><b>Please login or <a href="#" onclick="register();">register</a> to participate in this study.</b></div>',login_page=login_page.replace('"register"','"register" style="display:none"'),login_page=login_page.replace("If your family is new to Lookit, please",""),login(login_page,e,this)}else select_child(e,this)}.createDelegate(this)),d.append(t)}).createDelegate(this)(t[o+i*a+j]);$(e).append(d)}d=$("<div/>",{"class":["row-fluid"]});var p=$("<div/>",{"class":["span12"]});t.length>r&&(p.append(l),p.append(s)),d.append(p),$(e).append(d),0==o?(l.addClass("disabled"),l.click(function(){return!0})):(l.hasClass("disabled")&&l.removeClass("disabled"),l.click(function(){$(e).children().remove().end(),o=Math.max(0,o-r),c()})),o>=t.length-r?(s.addClass("disabled"),s.click(function(){return!0})):(s.hasClass("disabled")&&s.removeClass("disabled"),s.click(function(){$(e).children().remove().end(),o=Math.min(o+r,t.length-1),c()}))}.createDelegate(this);c()},e.prototype.getUploadingDialog=function(e){if(this.uploading||(this.uploading=!1),e){this.uploading=!0;var t=$("<div/>",{html:DEBRIEFHTML}),a=bootbox.dialog("",[{label:"Close","class":"btn-danger reset-close",callback:function(){return $.ajax({type:"POST",url:"./user.php",data:{table:"users","function":"set_account"},success:function(e){window.onbeforeunload=[],console.log(e),alert(experiment),window.location.replace("./index.php")},failure:function(e){window.onbeforeunload=[],console.log(e)}}),!0}}]);a.children(".modal-body").append(t)}else{if(e===void 0)return this.uploading;this.uploading=!1}return this.uploading},e.prototype.getUploadingMap=function(e){return(!this.upmap||e)&&(this.upmap={}),this.upmap},e.prototype._nextBarColor=function(){this.currentBarColor||(this.currentBarColor=0);var e=["progress-info"];return this.currentBarColor=(this.currentBarColor+1)%e.length," "+e[this.currentBarColor]},e.prototype.makeProgressBar=function(e){var t=$("<div/>",{"class":"progress"+this._nextBarColor()});return t.append($("<div/>",{id:e.hashCode(),"class":"bar",style:"width: 0%",text:e})),t},e.prototype.updateUpload=function(e,t,a){console.log(e,t,a);var n=100*(t/a),i=this.getUploadingMap();e in i?$("#"+e.hashCode()).css("width",n+"%"):$(".uploading").append(this.makeProgressBar(e)),i[e]={percentage:n,progress:t,size:a};var r=!0;for(var o in i)if(i.hasOwnProperty(o)){var s=i[o];r=r&&s.size==s.progress}r&&setTimeout(function(){this.getUploadingMap(!0);var e=this.getUploadingDialog();e&&(bootbox.hideAll(),this.getUploadingDialog(!1),this.show("home"))}.createDelegate(this),1e3)};var t=new e;return t}(),is_recording="0",jswcam=function(){function e(){}return e.prototype.getParameterInfo=function(){return document.jswcam.getParemeterInfo()},e.prototype.getExemptIdList=function(){return this.exemptIds||(this.exemptIds=[]),this.exemptIds},e.prototype.exemptId=function(e){null!=e&&0!=e&&this.getExemptIdList().push(e)},e.prototype.startRecording=function(e){"1"==is_recording&&(this.stopRecording("stopping"),console.log("Tried to start recording, but was already recording!  Stopped instead.")),get_params("params"),swfobject.getObjectById("flashplayer").recordToCamera(session.experiment_id,session.user_id+"_"+RECORDINGSET,session.participant,session.participant_privacy,e,recording_count),recording_count++,is_recording="1",console.log("Recording Started")},e.prototype.setRecordingSize=function(e,t){this.rec_width=e,this.rec_height=t},e.prototype.stopRecording=function(){"1"==is_recording&&swfobject.getObjectById("flashplayer").stop_record(""),is_recording="0",console.log("Recording Stopped")},e.prototype.waitForAssets=function(){if(0==arguments.length)return!1;var e=arguments[0];if(!$.isFunction(e))return!1;for(var t=arguments.length-1,a=1;arguments.length>a;a++){var n=arguments[a],i=document.getElementById(n);(function(a){var n=function(){t-=1,a.removeEventListener("canplaythrough",n),0==t&&e()};a.addEventListener("canplaythrough",n)})(i)}},e.prototype.pageFrameGrab=function(){return document.jswcam.pageFrameGrab()},e.prototype.toggleWebCamView=function(e){page.toggleMenu(e)},e.prototype.verifyAndUpload=function(e,t){page.showVerifyDialog(function(){page.getUploadingDialog(!0);var a=JSON.stringify(e);document.jswcam.upload(t),$.ajax({type:"POST",url:"mongo.php",data:{experiment_id:document.jswcam.getExperiment(),user_id:document.jswcam.getUser(),json_data:a},success:function(e){window.onbeforeunload=[],console.log(e)},failure:function(e){window.onbeforeunload=[],console.log(e)}})})},e.prototype.camFrameGrab=function(){return document.jswcam.camFrameGrab()},e.prototype.putFrame=function(e,t,a,n,i){var r=null;a&&(r=document.jswcam.getFrame(a)),page.loadApplet(e,t,n,i,"org/mit/webcam/applet/ImageViewer"),null!=r&&setTimeout(function(){document[t].setPath(r)},500)},e.prototype.updateFrame=function(e,t){if(document[e]){var a=document.jswcam.getFrame(t);document[e].setPath(a)}},e.prototype.detectMic=function(){return document.jswcam.detectMic()},e.prototype.detectVideo=function(){return document.jswcam.detectVideo()},new e}();